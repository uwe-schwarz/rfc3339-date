export const OPENAPI_YAML = "openapi: 3.1.0\ninfo:\n  title: rfc3339.date — Time API\n  version: 1.0.0\n  summary: \"Strict RFC3339 time endpoints + validation + conversions (incl. exotic time standards)\"\n  description: >\n    A precise, developer-centric time API.\n    Defaults to canonical RFC3339 UTC for /now, supports IANA time zones, strict RFC3339 validation,\n    ISO8601 validation, and conversions across common + exotic representations (NTP, GPS, TAI, JD/MJD, Excel, HTTP-date, RFC5322).\n    Plain text is first-class; JSON is optional via Accept header or ?json=1.\n\nservers:\n  - url: https://rfc3339.date\n    description: Production\n  - url: http://localhost:8787\n    description: Local dev (wrangler)\n\ntags:\n  - name: Time\n  - name: Validation\n  - name: Conversion\n  - name: Timezones\n  - name: Datasets\n\nx-runtime:\n  target: cloudflare-worker\n  notes:\n    - \"Use platform Intl.DateTimeFormat(timeZone=IANA) for offsets.\"\n    - \"DST transitions can be computed by scanning offsets over a range, then refining boundaries.\"\n\npaths:\n  /now:\n    get:\n      tags: [Time]\n      summary: Current time as RFC3339 (UTC)\n      description: >\n        Returns the current instant serialized as RFC3339 in UTC (canonical Z).\n        Default response is text/plain.\n      parameters:\n        - $ref: \"#/components/parameters/precision\"\n        - $ref: \"#/components/parameters/format\"\n        - $ref: \"#/components/parameters/json\"\n      responses:\n        \"200\":\n          description: RFC3339 timestamp\n          headers:\n            Cache-Control:\n              schema: { type: string }\n              example: \"no-store\"\n          content:\n            text/plain:\n              schema: { type: string }\n              examples:\n                utc:\n                  value: \"2026-02-25T19:17:03.482Z\"\n            application/json:\n              schema: { $ref: \"#/components/schemas/NowResponse\" }\n        \"400\":\n          $ref: \"#/components/responses/BadRequest\"\n\n  /now/{tz}:\n    get:\n      tags: [Time, Timezones]\n      summary: Current time rendered in an IANA time zone\n      description: >\n        Returns the current instant rendered in the requested IANA time zone, including numeric offset.\n        Same instant as /now, different representation.\n      parameters:\n        - $ref: \"#/components/parameters/tzPath\"\n        - $ref: \"#/components/parameters/precision\"\n        - $ref: \"#/components/parameters/format\"\n        - $ref: \"#/components/parameters/json\"\n      responses:\n        \"200\":\n          description: RFC3339 timestamp in requested zone (includes offset)\n          headers:\n            Cache-Control:\n              schema: { type: string }\n              example: \"no-store\"\n          content:\n            text/plain:\n              schema: { type: string }\n              examples:\n                berlin:\n                  value: \"2026-02-25T20:17:03.482+01:00\"\n            application/json:\n              schema: { $ref: \"#/components/schemas/NowResponse\" }\n        \"404\":\n          $ref: \"#/components/responses/NotFound\"\n        \"400\":\n          $ref: \"#/components/responses/BadRequest\"\n\n  /validate:\n    get:\n      tags: [Validation]\n      summary: Validate a timestamp string\n      description: >\n        Validates the given value against a specified profile.\n        In strict mode, rejects non-canonical/grammar-violating inputs.\n        In lenient mode, may accept parseable inputs with warnings and provide canonical output when possible.\n      parameters:\n        - name: value\n          in: query\n          required: true\n          schema: { type: string }\n          description: Input timestamp string to validate.\n        - $ref: \"#/components/parameters/profile\"\n        - $ref: \"#/components/parameters/mode\"\n        - $ref: \"#/components/parameters/json\"\n      responses:\n        \"200\":\n          description: Validation result\n          content:\n            application/json:\n              schema: { $ref: \"#/components/schemas/ValidateResponse\" }\n            text/plain:\n              schema: { type: string }\n              description: >\n                If Accept=text/plain (or ?json=0), returns either \"VALID\" or \"INVALID\" plus optional single-line reason.\n        \"400\":\n          $ref: \"#/components/responses/BadRequest\"\n\n    post:\n      tags: [Validation]\n      summary: Batch validate timestamp strings\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema: { $ref: \"#/components/schemas/ValidateBatchRequest\" }\n      responses:\n        \"200\":\n          description: Batch validation result\n          content:\n            application/json:\n              schema: { $ref: \"#/components/schemas/ValidateBatchResponse\" }\n        \"400\":\n          $ref: \"#/components/responses/BadRequest\"\n\n  /canonical:\n    get:\n      tags: [Conversion, Validation]\n      summary: Canonicalize a timestamp representation\n      description: >\n        Parses the given value under the selected profile and returns canonical RFC3339 UTC by default.\n        If out is set, returns canonical output for that target format.\n      parameters:\n        - name: value\n          in: query\n          required: true\n          schema: { type: string }\n        - $ref: \"#/components/parameters/profile\"\n        - $ref: \"#/components/parameters/out\"\n        - $ref: \"#/components/parameters/precision\"\n        - $ref: \"#/components/parameters/tzQuery\"\n        - $ref: \"#/components/parameters/json\"\n      responses:\n        \"200\":\n          description: Canonical output\n          content:\n            text/plain:\n              schema: { type: string }\n              examples:\n                canon:\n                  value: \"2026-02-25T19:17:03Z\"\n            application/json:\n              schema: { $ref: \"#/components/schemas/ConvertResponse\" }\n        \"400\":\n          $ref: \"#/components/responses/BadRequest\"\n        \"404\":\n          $ref: \"#/components/responses/NotFound\"\n\n  /convert:\n    get:\n      tags: [Conversion]\n      summary: Convert between time encodings\n      description: >\n        Converts an input value from an input encoding to an output encoding.\n        If in=auto, ambiguity results in 400 with candidates.\n        For timezone-dependent output formats, supply tz=IANA.\n        For standards requiring leap-second tables (TAI/GPS), supply leapdata=latest or a known version.\n      parameters:\n        - name: value\n          in: query\n          required: true\n          schema: { type: string }\n        - $ref: \"#/components/parameters/in\"\n        - $ref: \"#/components/parameters/out\"\n        - $ref: \"#/components/parameters/precision\"\n        - $ref: \"#/components/parameters/tzQuery\"\n        - name: leapdata\n          in: query\n          required: false\n          schema: { type: string, default: \"latest\" }\n          description: Leap-second dataset version identifier, or \"latest\".\n        - $ref: \"#/components/parameters/json\"\n      responses:\n        \"200\":\n          description: Converted output\n          content:\n            text/plain:\n              schema: { type: string }\n              examples:\n                rfc3339:\n                  value: \"2023-11-14T22:13:20Z\"\n            application/json:\n              schema: { $ref: \"#/components/schemas/ConvertResponse\" }\n        \"400\":\n          $ref: \"#/components/responses/BadRequest\"\n        \"404\":\n          $ref: \"#/components/responses/NotFound\"\n        \"415\":\n          $ref: \"#/components/responses/UnsupportedMediaType\"\n\n  /round:\n    get:\n      tags: [Conversion]\n      summary: Round a timestamp to a unit\n      parameters:\n        - name: value\n          in: query\n          required: true\n          schema: { type: string }\n        - $ref: \"#/components/parameters/in\"\n        - name: unit\n          in: query\n          required: true\n          schema:\n            type: string\n            enum: [ns, us, ms, s, min, hour, day]\n        - name: mode\n          in: query\n          required: false\n          schema:\n            type: string\n            enum: [floor, ceil, nearest]\n            default: nearest\n        - $ref: \"#/components/parameters/out\"\n        - $ref: \"#/components/parameters/precision\"\n        - $ref: \"#/components/parameters/tzQuery\"\n        - $ref: \"#/components/parameters/json\"\n      responses:\n        \"200\":\n          description: Rounded output\n          content:\n            text/plain:\n              schema: { type: string }\n            application/json:\n              schema: { $ref: \"#/components/schemas/ConvertResponse\" }\n        \"400\":\n          $ref: \"#/components/responses/BadRequest\"\n\n  /tz:\n    get:\n      tags: [Timezones]\n      summary: Time zone search / listing\n      description: >\n        Returns a list of IANA time zone IDs matching q (substring match).\n        If q is omitted, returns a curated list (or an implementation-defined subset).\n      parameters:\n        - name: q\n          in: query\n          required: false\n          schema: { type: string }\n        - name: limit\n          in: query\n          required: false\n          schema: { type: integer, minimum: 1, maximum: 500, default: 50 }\n      responses:\n        \"200\":\n          description: Zone matches\n          content:\n            application/json:\n              schema: { $ref: \"#/components/schemas/TzSearchResponse\" }\n\n  /tz/{zone}/offset:\n    get:\n      tags: [Timezones]\n      summary: Offset/DST information for a zone at a given instant\n      parameters:\n        - name: zone\n          in: path\n          required: true\n          schema: { type: string }\n          description: IANA time zone ID (URL-encoded), e.g. Europe%2FBerlin\n        - name: at\n          in: query\n          required: false\n          schema: { type: string }\n          description: RFC3339 instant to evaluate; default is now.\n        - $ref: \"#/components/parameters/json\"\n      responses:\n        \"200\":\n          description: Offset and DST status\n          content:\n            application/json:\n              schema: { $ref: \"#/components/schemas/TzOffsetResponse\" }\n            text/plain:\n              schema: { type: string }\n              description: \"Single-line summary: <offset> <dstFlag>\"\n        \"404\":\n          $ref: \"#/components/responses/NotFound\"\n        \"400\":\n          $ref: \"#/components/responses/BadRequest\"\n\n  /tz/{zone}/transitions:\n    get:\n      tags: [Timezones]\n      summary: DST/offset transitions for a zone in a time range\n      description: >\n        Returns boundaries where the numeric offset changes within the requested range.\n        Implementation can compute transitions by scanning offsets and refining boundary instants.\n      parameters:\n        - name: zone\n          in: path\n          required: true\n          schema: { type: string }\n        - name: start\n          in: query\n          required: true\n          schema: { type: string }\n          description: RFC3339 instant (inclusive)\n        - name: end\n          in: query\n          required: true\n          schema: { type: string }\n          description: RFC3339 instant (exclusive)\n        - name: granularity\n          in: query\n          required: false\n          schema:\n            type: string\n            enum: [day, hour, minute]\n            default: hour\n          description: Scan step used to detect transitions before boundary refinement.\n        - name: refine\n          in: query\n          required: false\n          schema:\n            type: string\n            enum: [s, ms]\n            default: s\n          description: Refinement resolution for transition instant.\n      responses:\n        \"200\":\n          description: Transition list\n          content:\n            application/json:\n              schema: { $ref: \"#/components/schemas/TzTransitionsResponse\" }\n        \"404\":\n          $ref: \"#/components/responses/NotFound\"\n        \"400\":\n          $ref: \"#/components/responses/BadRequest\"\n\n  /leapseconds:\n    get:\n      tags: [Datasets]\n      summary: Leap second dataset + current TAI-UTC offset\n      description: >\n        Provides leap second table used for UTC<->TAI and GPS conversions.\n        Versioning allows reproducible results.\n      parameters:\n        - name: version\n          in: query\n          required: false\n          schema: { type: string, default: \"latest\" }\n      responses:\n        \"200\":\n          description: Leap second dataset\n          headers:\n            Cache-Control:\n              schema: { type: string }\n              example: \"public, max-age=86400\"\n          content:\n            application/json:\n              schema: { $ref: \"#/components/schemas/LeapSecondsResponse\" }\n\ncomponents:\n  parameters:\n    tzPath:\n      name: tz\n      in: path\n      required: true\n      schema: { type: string }\n      description: IANA time zone ID (URL-encoded), e.g. Europe%2FBerlin\n    tzQuery:\n      name: tz\n      in: query\n      required: false\n      schema: { type: string }\n      description: IANA time zone for rendering outputs that are zone-dependent.\n    precision:\n      name: precision\n      in: query\n      required: false\n      schema:\n        type: integer\n        minimum: 0\n        maximum: 9\n        default: 3\n      description: Fractional second digits to emit (0..9).\n    format:\n      name: format\n      in: query\n      required: false\n      schema:\n        type: string\n        enum: [rfc3339, rfc3339sec, rfc3339nano]\n        default: rfc3339\n      description: Convenience output format alias.\n    json:\n      name: json\n      in: query\n      required: false\n      schema:\n        type: integer\n        enum: [0, 1]\n        default: 0\n      description: If 1, forces JSON output regardless of Accept header.\n    profile:\n      name: profile\n      in: query\n      required: false\n      schema:\n        type: string\n        enum:\n          - rfc3339\n          - iso8601\n          - iso8601:strict\n          - iso8601:extended\n          - iso8601:basic\n        default: rfc3339\n      description: Validation profile.\n    mode:\n      name: mode\n      in: query\n      required: false\n      schema:\n        type: string\n        enum: [strict, lenient]\n        default: strict\n      description: Strict rejects non-compliant inputs; lenient may accept with warnings.\n    in:\n      name: in\n      in: query\n      required: false\n      schema:\n        type: string\n        enum:\n          - auto\n          - rfc3339\n          - iso8601\n          - unix\n          - unixms\n          - ntp\n          - httpdate\n          - emaildate\n          - gps\n          - tai\n          - jd\n          - mjd\n          - excel1900\n          - excel1904\n          - weekdate\n          - ordinal\n          - doy\n        default: auto\n      description: Input encoding.\n    out:\n      name: out\n      in: query\n      required: false\n      schema:\n        type: string\n        enum:\n          - rfc3339\n          - iso8601\n          - unix\n          - unixms\n          - ntp\n          - httpdate\n          - emaildate\n          - gps\n          - tai\n          - jd\n          - mjd\n          - excel1900\n          - excel1904\n          - weekdate\n          - ordinal\n          - doy\n        default: rfc3339\n      description: Output encoding.\n\n  responses:\n    BadRequest:\n      description: Bad request (invalid input, ambiguity, or unsupported combination)\n      content:\n        application/json:\n          schema: { $ref: \"#/components/schemas/ErrorResponse\" }\n    NotFound:\n      description: Not found (unknown time zone or resource)\n      content:\n        application/json:\n          schema: { $ref: \"#/components/schemas/ErrorResponse\" }\n    UnsupportedMediaType:\n      description: Unsupported profile/format/encoding\n      content:\n        application/json:\n          schema: { $ref: \"#/components/schemas/ErrorResponse\" }\n\n  schemas:\n    NowResponse:\n      type: object\n      required: [now, tz, offset, precision]\n      properties:\n        now:\n          type: string\n          description: Timestamp string in selected representation (RFC3339)\n        tz:\n          type: string\n          description: Rendering time zone (UTC or requested IANA)\n        offset:\n          type: string\n          description: Numeric offset at that instant (e.g. Z, +01:00)\n        precision:\n          type: integer\n        unix:\n          type: integer\n          description: Unix seconds\n        unixms:\n          type: integer\n          description: Unix milliseconds\n\n    ValidateResponse:\n      type: object\n      required: [valid, profile, mode, errors, warnings]\n      properties:\n        valid: { type: boolean }\n        profile: { type: string }\n        mode: { type: string }\n        canonical:\n          type: string\n          nullable: true\n          description: Canonical RFC3339 UTC if derivable.\n        parsed:\n          $ref: \"#/components/schemas/ParsedParts\"\n        errors:\n          type: array\n          items: { $ref: \"#/components/schemas/Diagnostic\" }\n        warnings:\n          type: array\n          items: { $ref: \"#/components/schemas/Diagnostic\" }\n\n    ValidateBatchRequest:\n      type: object\n      required: [items]\n      properties:\n        profile:\n          type: string\n          nullable: true\n        mode:\n          type: string\n          nullable: true\n        items:\n          type: array\n          minItems: 1\n          items:\n            type: object\n            required: [value]\n            properties:\n              value: { type: string }\n              profile: { type: string, nullable: true }\n              mode: { type: string, nullable: true }\n\n    ValidateBatchResponse:\n      type: object\n      required: [results]\n      properties:\n        results:\n          type: array\n          items: { $ref: \"#/components/schemas/ValidateResponse\" }\n\n    ConvertResponse:\n      type: object\n      required: [in, out, value_in, value_out]\n      properties:\n        in: { type: string }\n        out: { type: string }\n        value_in: { type: string }\n        value_out: { type: string }\n        tz:\n          type: string\n          nullable: true\n        precision:\n          type: integer\n          nullable: true\n        instant:\n          type: object\n          description: Canonical internal instant representation.\n          properties:\n            rfc3339z: { type: string }\n            unix: { type: integer }\n            unixms: { type: integer }\n        notes:\n          type: array\n          items: { type: string }\n        candidates:\n          type: array\n          description: Present when in=auto is ambiguous.\n          items: { type: string }\n\n    ParsedParts:\n      type: object\n      properties:\n        year: { type: integer }\n        month: { type: integer }\n        day: { type: integer }\n        hour: { type: integer }\n        minute: { type: integer }\n        second: { type: integer }\n        fraction:\n          type: string\n          nullable: true\n          description: Fractional seconds as digits (no dot), up to 9.\n        offset:\n          type: string\n          description: Z or ±HH:MM\n\n    Diagnostic:\n      type: object\n      required: [code, message]\n      properties:\n        code: { type: string }\n        message: { type: string }\n        at:\n          type: integer\n          nullable: true\n          description: Character index (if applicable)\n\n    TzSearchResponse:\n      type: object\n      required: [zones]\n      properties:\n        zones:\n          type: array\n          items:\n            type: object\n            required: [id]\n            properties:\n              id: { type: string }\n              exampleCity: { type: string, nullable: true }\n\n    TzOffsetResponse:\n      type: object\n      required: [zone, at, offset, dst]\n      properties:\n        zone: { type: string }\n        at: { type: string }\n        offset: { type: string }\n        dst: { type: boolean }\n        abbreviation:\n          type: string\n          nullable: true\n          description: Best-effort (may be null; abbreviations are not stable/portable).\n\n    TzTransitionsResponse:\n      type: object\n      required: [zone, start, end, transitions]\n      properties:\n        zone: { type: string }\n        start: { type: string }\n        end: { type: string }\n        transitions:\n          type: array\n          items:\n            type: object\n            required: [at, offsetBefore, offsetAfter]\n            properties:\n              at:\n                type: string\n                description: RFC3339 instant where the new offset takes effect (best-effort resolution)\n              offsetBefore: { type: string }\n              offsetAfter: { type: string }\n\n    LeapSecondsResponse:\n      type: object\n      required: [version, taiMinusUtc, entries, source]\n      properties:\n        version: { type: string }\n        taiMinusUtc:\n          type: integer\n          description: Current TAI-UTC seconds offset per dataset.\n        source:\n          type: string\n          description: Dataset provenance (e.g., IERS bulletin identifier and publication date).\n        entries:\n          type: array\n          items:\n            type: object\n            required: [effective, taiMinusUtc]\n            properties:\n              effective:\n                type: string\n                description: RFC3339 date-time at which the offset becomes effective (UTC).\n              taiMinusUtc:\n                type: integer\n\n    ErrorResponse:\n      type: object\n      required: [error, message]\n      properties:\n        error: { type: string }\n        message: { type: string }\n        details:\n          type: array\n          items: { $ref: \"#/components/schemas/Diagnostic\" }\n";
